<%= form_with(model: reward_condition.persisted? ? reward_condition : [@medication_group, reward_condition], local: false,
  data: { action: "turbo:submit-end->modal#close" }
  ) do |form| %>

  <%# ご褒美名 %>
  <div class="mb-4">
    <%= form.label :reward_name, "ご褒美", class: "block text-md font-medium text-gray-700 mb-2" %>
    <%= form.text_field :reward_name, class: "mt-1 block rounded-md w-full border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-semibold text-lg" %>

    <%# エラーメッセージ表示 %>
    <% if reward_condition.errors[:reward_name].any? %>
      <div class="mt-1 text-sm text-red-600">
        <%= reward_condition.errors[:reward_name].first %>
      </div>
    <% end %>
  </div>

  <%# ご褒美条件 %>
  <div class="my-4">
    <%= form.label :condition_type, "ご褒美条件", class: "block text-md font-medium text-gray-700 mb-2" %>
    <div class="space-y-3">
      <!-- カード式の選択肢 -->
      <div class="grid grid-cols-3 gap-2">
        <% ["weekly", "daily_streak"].each do |condition_type| %>
          <label class="relative cursor-pointer">
            <%= form.radio_button :condition_type, condition_type, 
                  class: "sr-only peer" %>
            <div class="p-3 border-2 border-gray-200 rounded-lg text-center transition-all duration-200 peer-checked:border-teal-500 peer-checked:bg-teal-100 hover:border-gray-300">
              <div class="text-lg font-semibold text-gray-900"><%= RewardCondition.human_attribute_name("condition_type.#{condition_type}") %></div>
            </div>
          </label>
        <% end %>
      </div>
    </div>
    <%# エラーメッセージ表示 %>
    <% if reward_condition.errors[:condition_type].any? %>
      <div class="mt-1 text-sm text-red-600">
        <%= reward_condition.errors[:condition_type].first %>
      </div>
    <% end %>
  </div>

  <%# 曜日 %>
  <div class="my-4">
    <%= form.label :target_weekday, "ご褒美曜日", class: "block text-md font-medium text-gray-700 mb-2" %>
    <div class="space-y-3">
      <!-- カード式の選択肢 -->
      <div class="grid grid-cols-4 gap-2">
        <% ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"].each do |target_weekday| %>
          <label class="relative cursor-pointer">
            <%= form.radio_button :target_weekday, target_weekday, 
                  class: "sr-only peer" %>
            <div class="p-3 border-2 border-gray-200 rounded-lg text-center transition-all duration-200 peer-checked:border-teal-500 peer-checked:bg-teal-100 hover:border-gray-300">
              <div class="text-lg font-semibold text-gray-900"><%= RewardCondition.human_attribute_name("target_weekday.#{target_weekday}") %></div>
            </div>
          </label>
        <% end %>
      </div>
    </div>
    <%# エラーメッセージ表示 %>
    <% if reward_condition.errors[:target_weekday].any? %>
      <div class="mt-1 text-sm text-red-600">
        <%= reward_condition.errors[:target_weekday].first %>
      </div>
    <% end %>
  </div>

  <%# 連続日数 %>
  <div class="my-4">
    <%= form.label :target_value, "連続日数", class: "block text-md font-medium text-gray-700 mb-2" %>
    <div class="space-y-3">
      <!-- カード式の選択肢 -->
      <div class="grid grid-cols-3 gap-2">
        <% [10, 20, 30].each do |count| %>
          <label class="relative cursor-pointer">
            <%= form.radio_button :target_value, count,
                  class: "sr-only peer" %>
            <div class="p-3 border-2 border-gray-200 rounded-lg text-center transition-all duration-200 peer-checked:border-teal-500 peer-checked:bg-teal-100 hover:border-gray-300">
              <div class="text-lg font-semibold text-gray-900"><%= count %>日間</div>
            </div>
          </label>
        <% end %>
      </div>
    </div>
    <%# エラーメッセージ表示 %>
    <% if reward_condition.errors[:target_value].any? %>
      <div class="mt-1 text-sm text-red-600">
        <%= reward_condition.errors[:target_value].first %>
      </div>
    <% end %>
  </div>

  <%# 送信ボタン %>
  <div class="flex justify-end space-x-3 pt-4">

    <%# 送信ボタン %>
    <%= form.submit reward_condition.persisted? ? "更新" : "作成",
        class: "px-4 py-2 text-sm font-medium text-gray-700 bg-sage-500 border border-transparent rounded-md hover:bg-sage-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors" %>

    <%# キャンセルボタン %>
    <button type="button"
            data-action="click->modal#hide"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors">
      キャンセル
    </button>
  </div>

<% end %>
